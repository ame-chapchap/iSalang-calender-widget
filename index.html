<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Google Calendar Widget</title>
  <style>
    /* ========= Reset ========= */
    * { margin:0; padding:0; box-sizing:border-box; }

    /* ========= Theme Tokens ========= */
    :root{
      --ink: #2c3e50;
      --event-bg: #7BAEF5;
      --event-hover: #5A98F0;
      --event-border: rgba(255,255,255,.28);
      --event-shadow: rgba(90,152,240,.28);

      --today-bg: rgba(134,197,184,.30);
      --today-ring: #86C5B8;
      --today-shadow: rgba(134,197,184,.35);

      --container-max: 1100px; /* PCの最大幅 */
    }

    /* ========= Layout (PCデザインあり) ========= */
    body{
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #d6e9f0 0%, #f0e6d2 100%);
      min-height: 100vh;
      overflow-x: hidden;
      padding: 24px;
    }
    .calendar-container{
      max-width: var(--container-max);
      margin: 0 auto;
      background: rgba(255,255,255,.9);
      border-radius: 16px;
      box-shadow: 0 8px 32px rgba(0,0,0,.1);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255,255,255,.2);
      overflow: hidden;
    }

    /* ========= Header ========= */
    .calendar-header{
      display:flex; align-items:center; justify-content:space-between;
      padding: 24px 32px 16px;
      background: rgba(255,255,255,.8);
      backdrop-filter: blur(8px);
    }
    .nav-button{
      background: rgba(214,233,240,.6);
      border:1px solid rgba(214,233,240,.8);
      border-radius:10px;
      min-width:42px; min-height:42px;
      font-size:18px; color:#5a7c89; cursor:pointer;
      display:flex; align-items:center; justify-content:center;
      transition:.2s;
    }
    .nav-button:hover{ background: rgba(214,233,240,.8); color:#4a6c79; }
    .month-year{
      font-size:24px; font-weight:700; color:#4a6c79; text-align:center; flex:1; margin:0 16px;
    }
    .view-controls{
      display:flex; gap:8px; background: rgba(214,233,240,.4); border-radius:12px; padding:4px;
      justify-content:center;
    }
    .view-button{
      background:transparent; border:none; border-radius:8px;
      padding:8px 16px; min-height:36px; font-size:14px; font-weight:600;
      color:#5a7c89; cursor:pointer; transition:.2s;
    }
    .view-button.active{
      background: rgba(255,255,255,.95);
      color:#4a6c79; box-shadow:0 2px 8px rgba(0,0,0,.08);
    }

    /* ========= Month View ========= */
    .calendar-view{ display:none; }
    .calendar-view.active{ display:block; }

    .calendar-grid{
      display:grid; grid-template-columns:repeat(7,1fr);
      gap:2px; padding:10px; background: rgba(255,255,255,.1);
      border-radius:14px;
    }
    .calendar-header-cell{
      background: rgba(200,200,200,.3);
      color:#2c3e50; text-align:center;
      padding:12px 4px; font-weight:700; font-size:12px;
      border-radius:10px; border:1px solid rgba(200,200,200,.2);
      backdrop-filter: blur(4px);
    }
    .calendar-cell{
      background: rgba(255,255,255,.45);
      border-radius:10px; padding:6px; min-height:92px;
      position:relative; transition:.25s; backdrop-filter: blur(4px);
    }
    .calendar-cell:hover{ background: rgba(255,255,255,.65); transform: scale(1.01); }
    .calendar-cell.other-month{ background: rgba(200,200,200,.2); color:#7f8c8d; opacity:.65; }
    .calendar-cell.other-month .date-number{ color:#7f8c8d; opacity:.8; }
    .calendar-cell.other-month .event{
      background: linear-gradient(135deg, rgba(149,165,166,.2) 0%, rgba(127,140,141,.3) 100%);
      color: rgba(255,255,255,.9); box-shadow: 0 1px 4px rgba(149,165,166,.2);
    }

    .calendar-cell.today{
      background: linear-gradient(135deg, var(--today-bg) 0%, rgba(134,197,184,.42) 100%);
      box-shadow: 0 0 0 2px var(--today-ring) inset, 0 6px 18px var(--today-shadow);
    }
    .date-number{ font-size:14px; font-weight:700; color:#2c3e50; margin-bottom:4px; }

    .event{
      background: linear-gradient(135deg, color-mix(in srgb, var(--event-bg) 85%, #fff 15%) 0%, var(--event-bg) 100%);
      color:#fff; font-size:11px; padding:4px 6px; border-radius:6px; margin-bottom:3px; cursor:pointer;
      border:1px solid var(--event-border); box-shadow:0 3px 10px var(--event-shadow);
      text-shadow:0 1px 2px rgba(0,0,0,.25); transition:.2s;
    }
    .event:hover{
      background: linear-gradient(135deg, var(--event-hover) 0%, color-mix(in srgb, var(--event-hover) 90%, #2A84E4 10%) 100%);
      transform: translateY(-1px) scale(1.02); box-shadow:0 6px 16px color-mix(in srgb, var(--event-shadow) 80%, #2A84E4 20%);
    }
    .event-time{ font-weight:700; display:block; font-size:10px; opacity:.9; text-shadow:0 1px 2px rgba(0,0,0,.2); }
    .event-title{ font-size:10px; line-height:1.3; word-break:break-word; text-shadow:0 1px 2px rgba(0,0,0,.2); }

    /* ========= Agenda View ========= */
    .agenda-view{ display:none; background: rgba(255,255,255,.7); padding:20px; }
    .agenda-view.active{ display:block; }
    .agenda-date{
      font-size:18px; font-weight:700; color:#4a6c79;
      margin:24px 0 12px; padding-bottom:8px; border-bottom:2px solid rgba(214,233,240,.6);
    }
    .agenda-event{
      background: color-mix(in srgb, var(--event-bg) 22%, #fff 78%);
      color: color-mix(in srgb, var(--ink) 88%, #000 12%);
      padding:16px; border-radius:8px; margin-bottom:12px; cursor:pointer;
      border-left:4px solid var(--event-bg); transition:.2s; backdrop-filter: blur(4px);
    }
    .agenda-event:hover{ background: color-mix(in srgb, var(--event-bg) 35%, #fff 65%); }

    /* ========= Tooltip / Modal ========= */
    .tooltip{
      position:absolute; background: rgba(44,62,80,.95); color:#fff;
      padding:8px 12px; border-radius:8px; font-size:12px; pointer-events:none;
      opacity:0; transition: opacity .3s; z-index:1000; white-space:nowrap;
    }
    .tooltip.show{ opacity:1; }

    .event-modal{
      position:fixed; inset:0; background: rgba(0,0,0,.6); display:none; justify-content:center; align-items:center;
      z-index:2000; animation: fadeIn .3s ease;
    }
    .event-modal.show{ display:flex; }
    .event-modal-content{
      background: linear-gradient(135deg, #e8f4f8 0%, #f0f8e8 100%);
      border-radius:20px; padding:28px; max-width:500px; width:90%; max-height:80vh; overflow:auto;
      border:1px solid rgba(255,255,255,.3); box-shadow:0 20px 40px rgba(0,0,0,.3); position:relative;
      animation: slideIn .3s ease;
    }
    .event-modal-close{
      position:absolute; top:14px; right:18px; background:none; border:none; font-size:24px; color:#5a7c89; cursor:pointer;
      width:30px; height:30px; border-radius:50%; transition:.2s;
    }
    .event-modal-title{ font-size:22px; font-weight:800; color:#2c3e50; margin-bottom:16px; }
    .event-detail-item{ display:flex; gap:12px; padding:12px; background: rgba(255,255,255,.45); border-radius:10px; }
    .event-detail-label{ font-weight:700; color:#2c3e50; font-size:14px; margin-bottom:4px; }
    .event-detail-value{ color:#34495e; font-size:14px; line-height:1.5; word-break: break-word; }
    .event-detail-value a{ color:#3498db; text-decoration: underline; }

    @keyframes fadeIn{ from{opacity:0;} to{opacity:1;} }
    @keyframes slideIn{ from{opacity:0; transform: translateY(-36px) scale(.96);} to{opacity:1; transform:none;} }

    /* ========= Responsive (スマホはデザインを消して全幅) ========= */
    @media (max-width: 640px){
      body{ background:#fff !important; padding:0 !important; margin:0 !important; }
      .calendar-container{
        max-width:100% !important; width:100% !important; margin:0 !important;
        border-radius:0 !important; box-shadow:none !important; border:none !important; background:#fff !important;
      }
      .calendar-header{
        display:grid; grid-template-columns:1fr auto 1fr; grid-template-rows:auto auto;
        grid-template-areas: "prev title next" "views views today";
        gap:10px 8px; padding:14px 12px 8px;
      }
      .calendar-header .nav-button:nth-of-type(1){ grid-area:prev; justify-self:start; }
      .calendar-header .nav-button:nth-of-type(2){ grid-area:next; justify-self:end; }
      .calendar-header .nav-button:nth-of-type(3){ grid-area:today; justify-self:end; }
      .month-year{ grid-area:title; margin:0; font-size:20px; text-align:center; }
      .view-controls{ grid-area:views; width:100%; max-width:280px; justify-self:center; }
      .view-button{ min-height:34px; padding:8px 12px; font-size:13px; flex:1 1 auto; }

      .calendar-grid{
        grid-template-columns: repeat(7, minmax(0,1fr));
        gap:1px; padding:8px 10px; width:100%;
      }
      .calendar-cell{ min-height:80px; padding:6px 4px; }
      .calendar-header-cell{ padding:10px 2px; font-size:11px; }
      .event{ font-size:10px; padding:3px 6px; border-radius:5px; }
      .event-time{ font-size:9px; }
      .event-title{ font-size:10px; }
      .agenda-view{ padding:14px; }
    }

    /* ========= Loading / Error ========= */
    .loading{ text-align:center; padding:36px; font-size:16px; color:#5a7c89; }
    .error-message{
      background: rgba(240,230,210,.85); color:#8b5a3c; padding:20px; border-radius:8px; margin:20px;
      border-left:4px solid #d4a574; line-height:1.6;
    }
    .setup-instructions{
      background: rgba(214,233,240,.85); color:#3a5a6b; padding:20px; border-radius:8px; margin:20px; border-left:4px solid #6b9fc7;
    }
    .setup-instructions h3{ margin:0 0 8px; }
    .setup-instructions code{ background: rgba(107,159,199,.2); padding:2px 6px; border-radius:4px; font-family: ui-monospace, SFMono-Regular, Menlo, monospace; }
  </style>
</head>
<body>
  <div class="calendar-container">
    <div class="calendar-header">
      <button class="nav-button" onclick="previousMonth()">‹</button>
      <div>
        <div class="month-year" id="monthYear"></div>
        <div class="view-controls">
          <button class="view-button active" onclick="switchView('month')">月</button>
          <button class="view-button" onclick="switchView('agenda')">一覧</button>
        </div>
      </div>
      <button class="nav-button" onclick="nextMonth()">›</button>
      <button class="nav-button" onclick="goToToday()">今日</button>
    </div>

    <div id="loading" class="loading">カレンダーを読み込み中...</div>
    <div id="error" class="error-message" style="display:none;"></div>

    <!-- セットアップ説明（APIトラブル時に表示） -->
    <div id="setupInstructions" class="setup-instructions" style="display:none;">
      <h3>🔧 セットアップ手順</h3>
      <ol>
        <li><strong>APIキーを取得:</strong> <a href="https://console.cloud.google.com/" target="_blank">Google Cloud Console</a> でCalendar APIを有効化しキーを作成</li>
        <li><strong>APIキー制限:</strong> HTTPリファラーに
          <code>https://ame-chapchap.github.io/*</code> と <code>http://localhost:*</code> を追加
        </li>
        <li><strong>カレンダー公開:</strong> 対象カレンダーを一般公開に設定</li>
        <li><strong>コード更新:</strong> <code>apiKey</code> に取得したキーを設定</li>
      </ol>
    </div>

    <!-- 月ビュー -->
    <div id="monthView" class="calendar-view active">
      <div class="calendar-grid" id="calendarGrid"></div>
    </div>

    <!-- 予定（Agenda）ビュー -->
    <div id="agendaView" class="agenda-view">
      <div id="agendaContainer"></div>
    </div>
  </div>

  <div id="tooltip" class="tooltip"></div>

  <!-- イベント詳細モーダル -->
  <div id="eventModal" class="event-modal">
    <div class="event-modal-content">
      <button class="event-modal-close" onclick="closeEventModal()">&times;</button>
      <div class="event-modal-title" id="modalTitle">イベントタイトル</div>
      <div class="event-modal-details" id="modalDetails"></div>
    </div>
  </div>

  <script>
    // ===== API設定 =====
    let apiKey = 'AIzaSyD7nOJVgpjuqu6-LjXDq7UNRBUGcCT3dDE';
    const calendarId = 'isalang.2ain@gmail.com';

    function validateApiKey(){
      if (!apiKey || apiKey === 'YOUR_API_KEY_HERE' || apiKey.length < 30){
        showError('APIキーが設定されていません。正しいAPIキーを設定してください。');
        return false;
      }
      return true;
    }

    // ===== 状態 =====
    let currentDate = new Date();
    let currentView = 'month';
    let events = [];

    // 日本語表記
    const monthNames = ['1月','2月','3月','4月','5月','6月','7月','8月','9月','10月','11月','12月'];
    const dayNames   = ['月','火','水','木','金','土','日'];

    document.addEventListener('DOMContentLoaded', loadCalendar);

    // ===== APIから取得 =====
    async function fetchEvents(startDate, endDate){
      if(!validateApiKey()) return [];
      const params = new URLSearchParams({
        key: apiKey,
        timeMin: startDate.toISOString(),
        timeMax: endDate.toISOString(),
        singleEvents: true,
        orderBy: 'startTime'
      });
      try{
        const url = `https://www.googleapis.com/calendar/v3/calendars/${encodeURIComponent(calendarId)}/events?${params}`;
        const res = await fetch(url);
        if(!res.ok){
          if(res.status===403) throw new Error('APIキーまたはアクセス権限の問題です。キー制限と公開設定を確認してください。');
          if(res.status===404) throw new Error('カレンダーが見つかりません。カレンダーIDを確認してください。');
          throw new Error(`API エラー: ${res.status} ${res.statusText}`);
        }
        const data = await res.json();
        return data.items || [];
      }catch(e){
        showError(`❌ ${e.message}`);
        return [];
      }
    }

    // ===== 描画フロー =====
    async function loadCalendar(){
      showLoading(true); hideError();
      const start = getCalendarStartDate(currentDate);
      const end   = getCalendarEndDate(currentDate);
      events = await fetchEvents(start, end);
      showLoading(false);
      updateDisplay();
    }

    function updateDisplay(){
      updateMonthYear();
      if(currentView==='month') generateMonthView();
      else if(currentView==='agenda') generateAgendaView();
    }

    function updateMonthYear(){
      document.getElementById('monthYear').textContent =
        `${currentDate.getFullYear()}年 ${monthNames[currentDate.getMonth()]}`;
    }

    // ===== 月ビュー =====
    function generateMonthView(){
      const grid = document.getElementById('calendarGrid');
      grid.innerHTML = '';

      // 曜日ヘッダー
      dayNames.forEach(d=>{
        const h = document.createElement('div');
        h.className='calendar-header-cell';
        h.textContent=d;
        grid.appendChild(h);
      });

      // セル
      const startDate = getCalendarStartDate(currentDate);
      const today = new Date();

      for(let i=0;i<42;i++){
        const cellDate = new Date(startDate); cellDate.setDate(startDate.getDate()+i);
        const cell = document.createElement('div'); cell.className='calendar-cell';
        if(cellDate.getMonth()!==currentDate.getMonth()) cell.classList.add('other-month');
        if(isSameDay(cellDate,today)) cell.classList.add('today');

        const num = document.createElement('div');
        num.className='date-number'; num.textContent=cellDate.getDate();
        cell.appendChild(num);

        getEventsForDate(cellDate).forEach(ev=>{
          const el = createEventElement(ev,'month'); cell.appendChild(el);
        });

        grid.appendChild(cell);
      }
    }

    // ===== 予定ビュー =====
    function generateAgendaView(){
      const container = document.getElementById('agendaContainer');
      container.innerHTML='';

      const monthEvents = getEventsForMonth(currentDate);
      const grouped = groupEventsByDate(monthEvents);

      Object.keys(grouped).sort().forEach(dateStr=>{
        const date = new Date(dateStr);
        const head = document.createElement('div');
        head.className='agenda-date';
        head.textContent = `${date.getDate()}日 (${dayNames[date.getDay()===0?6:date.getDay()-1]})`;
        container.appendChild(head);

        grouped[dateStr].forEach(ev=>{
          const el = createEventElement(ev,'agenda'); el.className='agenda-event'; container.appendChild(el);
        });
      });
    }

    // ===== イベント要素（共通） =====
    function createEventElement(event, viewType){
      const div = document.createElement('div'); div.className='event';
      const start = new Date(event.start.dateTime || event.start.date);

      const time = document.createElement('span'); time.className='event-time';
      time.textContent = event.start.dateTime ? formatTime(start) : '';
      const title = document.createElement('span'); title.className='event-title';

      let t = (event.summary || '無題').split('\n')[0];
      const max = viewType==='month' ? (window.innerWidth<=480 ? 8 : 12) : 50;
      title.textContent = t.length>max ? t.slice(0,max)+'…' : t;

      div.appendChild(time); div.appendChild(title);

      div.addEventListener('click', e=>{ e.stopPropagation(); showEventModal(event); });

      if(t.length>max){ div.setAttribute('data-full-title', event.summary||'無題');
        div.addEventListener('mouseenter', showTooltip);
        div.addEventListener('mouseleave', hideTooltip);
        div.addEventListener('mousemove', moveTooltip);
      }
      return div;
    }

    // ===== Utils =====
    function getCalendarStartDate(date){
      const first = new Date(date.getFullYear(), date.getMonth(), 1);
      const dow = first.getDay(); const mondayOffset = dow===0?6:dow-1;
      const start = new Date(first); start.setDate(first.getDate()-mondayOffset); return start;
    }
    function getCalendarEndDate(date){
      const last = new Date(date.getFullYear(), date.getMonth()+1, 0);
      const dow = last.getDay(); const sundayOffset = dow===0?0:7-dow;
      const end = new Date(last); end.setDate(last.getDate()+sundayOffset); return end;
    }
    function getEventsForDate(d){
      return events.filter(ev=>{
        const s = new Date(ev.start.dateTime || ev.start.date);
        return isSameDay(s,d);
      });
    }
    function getEventsForMonth(d){
      return events.filter(ev=>{
        const s = new Date(ev.start.dateTime || ev.start.date);
        return s.getMonth()===d.getMonth() && s.getFullYear()===d.getFullYear();
      });
    }
    function groupEventsByDate(list){
      const g={}; list.forEach(ev=>{
        const dt = new Date(ev.start.dateTime || ev.start.date).toDateString();
        (g[dt] ||= []).push(ev);
      }); return g;
    }
    function isSameDay(a,b){ return a.getDate()===b.getDate() && a.getMonth()===b.getMonth() && a.getFullYear()===b.getFullYear(); }
    function formatTime(d){ return `${String(d.getHours()).padStart(2,'0')}:${String(d.getMinutes()).padStart(2,'0')}`; }

    // ===== ナビゲーション =====
    function previousMonth(){ currentDate.setMonth(currentDate.getMonth()-1); loadCalendar(); }
    function nextMonth(){ currentDate.setMonth(currentDate.getMonth()+1); loadCalendar(); }
    function goToToday(){ currentDate = new Date(); loadCalendar(); }

    // ===== ビュー切替（「月」「予定」だけ） =====
    function switchView(view){
      currentView = view;
      document.querySelectorAll('.view-button').forEach(b=>b.classList.remove('active'));
      event.target.classList.add('active');
      document.querySelectorAll('.calendar-view, .agenda-view').forEach(v=>v.classList.remove('active'));
      if(view==='month') document.getElementById('monthView').classList.add('active');
      else if(view==='agenda') document.getElementById('agendaView').classList.add('active');
      updateDisplay();
    }

    // ===== Loading / Error =====
    function showLoading(show){ document.getElementById('loading').style.display = show ? 'block':'none'; }
    function showError(msg){
      const el = document.getElementById('error'); el.innerHTML = msg; el.style.display='block';
      if (msg.includes('APIキー') || msg.includes('API エラー') || msg.includes('アクセス権限')){
        document.getElementById('setupInstructions').style.display='block';
      }
    }
    function hideError(){ document.getElementById('error').style.display='none'; document.getElementById('setupInstructions').style.display='none'; }

    // ===== Tooltip =====
    function showTooltip(e){
      const tip = document.getElementById('tooltip');
      tip.textContent = e.currentTarget.getAttribute('data-full-title');
      tip.classList.add('show');
    }
    function hideTooltip(){ document.getElementById('tooltip').classList.remove('show'); }
    function moveTooltip(e){
      const tip = document.getElementById('tooltip');
      tip.style.left = (e.pageX + 10) + 'px';
      tip.style.top  = (e.pageY - 30) + 'px';
    }

    // ===== Modal =====
    function showEventModal(ev){
      const modal = document.getElementById('eventModal');
      const title = document.getElementById('modalTitle');
      const details = document.getElementById('modalDetails');
      title.textContent = ev.summary || '無題のイベント';
      details.innerHTML = '';

      const s = new Date(ev.start.dateTime || ev.start.date);
      const e = new Date(ev.end.dateTime || ev.end.date);
      let when='';
      if(ev.start.dateTime && ev.end.dateTime){
        when = isSameDay(s,e) ? `${formatDate(s)} ${formatTime(s)} - ${formatTime(e)}`
                               : `${formatDate(s)} ${formatTime(s)} - ${formatDate(e)} ${formatTime(e)}`;
      }else{
        if(isSameDay(s,e) || (e - s === 24*60*60*1000)) when = `${formatDate(s)} (終日)`;
        else { const adj = new Date(e.getTime() - 24*60*60*1000); when = `${formatDate(s)} - ${formatDate(adj)} (終日)`; }
      }
      addDetailItem('🕒','日時',when);

      if(ev.description) addDetailItem('📝','説明',convertUrlsToLinks(ev.description),true);
      if(ev.location)    addDetailItem('📍','場所',convertUrlsToLinks(ev.location),true);
      if(ev.conferenceData && ev.conferenceData.entryPoints){
        const links = ev.conferenceData.entryPoints.filter(x=>x.entryPointType==='video')
          .map(x=>`<a href="${x.uri}" target="_blank" rel="noopener noreferrer">${x.uri}</a>`).join('<br>');
        if(links) addDetailItem('🎥','会議リンク',links,true);
      }
      if(ev.attendees && ev.attendees.length){
        const list = ev.attendees.map(a=>{
          const map={accepted:' ✅',declined:' ❌',tentative:' ❓'}; return (a.displayName||a.email)+(map[a.responseStatus]||' ⏳');
        }).join('<br>');
        addDetailItem('👥','参加者',list);
      }
      if(ev.htmlLink) addDetailItem('🔗','Google Calendar',`<a href="${ev.htmlLink}" target="_blank">${ev.htmlLink}</a>`,true);
      if(ev.creator && ev.creator.displayName) addDetailItem('👤','作成者',ev.creator.displayName);

      modal.classList.add('show'); document.body.style.overflow='hidden';
    }
    function addDetailItem(icon,label,value,isHtml=false){
      const wrap = document.createElement('div'); wrap.className='event-detail-item';
      wrap.innerHTML = `<div class="event-detail-icon">${icon}</div>`;
      const content = document.createElement('div'); content.className='event-detail-content';
      const l = document.createElement('div'); l.className='event-detail-label'; l.textContent=label;
      const v = document.createElement('div'); v.className='event-detail-value';
      if(isHtml) v.innerHTML=value; else v.textContent=value;
      content.appendChild(l); content.appendChild(v); wrap.appendChild(content);
      document.getElementById('modalDetails').appendChild(wrap);
    }
    function closeEventModal(){ document.getElementById('eventModal').classList.remove('show'); document.body.style.overflow=''; }
    function formatDate(d){
      const y=d.getFullYear(), m=d.getMonth()+1, day=d.getDate();
      const w = dayNames[d.getDay()===0?6:d.getDay()-1];
      return `${y}年${m}月${day}日 (${w})`;
    }

    function convertUrlsToLinks(text){
      let html = text.replace(/\n/g,'<br>');
      const urlPattern = /(https?:\/\/[^\s<>"\[\]{}|\\^`]+)/gi;
      return html.replace(urlPattern, url=>`<a href="${url}" target="_blank" rel="noopener noreferrer">${url}</a>`);
    }
  </script>
</body>
</html>
